<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gradient from Image</title>
  <style>
    #imageBox {
      margin-bottom: 20px;
    }

    #textBox {
      padding: 20px;
      font-size: 20px;
      border-radius: 10px;
      max-width: 300px;
      color: white;
      text-align: center;
      transition: background 0.5s ease, color 0.5s ease;
    }
  </style>
</head>
<body>

  <div id="imageBox">
    <img id="mainImage"
         src="images/state image/rajesthan.jpg"
         width="300px"
         crossorigin="anonymous" />
  </div>

  <div id="textBox">
    <p>This is gradient color</p>
  </div>

  <!-- Color Thief Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.2/color-thief.umd.js"></script>
  <script>
    window.onload = function () {
      const img = document.getElementById('mainImage');
      const textBox = document.getElementById('textBox');
      const colorThief = new ColorThief();

      function lightenColor(color, factor = 0.5) {
        return color.map(c => Math.min(255, Math.floor(c + (255 - c) * factor)));
      }

      function applyGradient() {
        try {
          const originalColor = colorThief.getColor(img);
          const lightColor = lightenColor(originalColor, 0.5);
          const rgb = `rgb(${lightColor[0]}, ${lightColor[1]}, ${lightColor[2]})`;

          // Smoother gradient
          textBox.style.background = `linear-gradient(to right, white 10%, ${rgb} 50%, white 90%)`;

          // Adjust text color for readability
          const brightness = (lightColor[0] * 299 + lightColor[1] * 587 + lightColor[2] * 114) / 1000;
          textBox.style.color = brightness > 128 ? 'black' : 'white';
        } catch (err) {
          console.error('Color extraction failed:', err);
          textBox.style.background = "lightgray";
          textBox.style.color = "black";
        }
      }

      if (img.complete) {
        applyGradient();
      } else {
        img.addEventListener('load', applyGradient);
      }
    };
  </script>

</body>
</html>
